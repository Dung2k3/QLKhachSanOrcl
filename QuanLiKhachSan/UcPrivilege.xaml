<UserControl x:Class="QuanLiKhachSan.UcPrivilege"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:QuanLiKhachSan"
             mc:Ignorable="d" d:DesignHeight="600" d:DesignWidth="1000">
    <UserControl.Resources>
        <ResourceDictionary Source="MyResourceDictionary.xaml"/>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="5">
                <Label Content="User/Role" Width="294"/>
                <ComboBox x:Name="cbTargetUserRole" 
                              Style="{StaticResource cbLuaChon}" 
                              Width="262"
                              SelectionChanged="cbTargetUserRole_SelectionChanged"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Margin="5">
                <Label Content="Privilege Type"/>
                <ComboBox x:Name="cbPrivilegeType" 
                              Style="{StaticResource cbLuaChon}" 
                              Width="248"
                          SelectionChanged="cbPrivilegeType_SelectionChanged">
                    <ComboBoxItem Content="System Privileges"/>
                    <ComboBoxItem Content="Object Privileges"/>
                </ComboBox>
            </StackPanel>

            <StackPanel Grid.Column="2" Margin="5">
                <Label Content="Privilege Action"/>
                <ComboBox x:Name="cbPrivilegeAction" 
                              Style="{StaticResource cbLuaChon}" 
                              Width="242" SelectionChanged="cbPrivilegeAction_SelectionChanged">
                    <ComboBoxItem Content="Grant"/>
                    <ComboBoxItem Content="Revoke"/>
                </ComboBox>
            </StackPanel>
        </Grid>

        <Grid Grid.Row="1" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="5">
                <Label Content="System Privileges"/>
                <ComboBox x:Name="cbSystemPrivileges" 
                              Style="{StaticResource cbLuaChon}" 
                              Width="180">
                    <ComboBoxItem Content="CREATE PROFILE"/>
                    <ComboBoxItem Content="ALTER PROFILE"/>
                    <ComboBoxItem Content="DROP PROFILE"/>
                    <ComboBoxItem Content="CREATE ROLE"/>
                    <ComboBoxItem Content="ALTER ANY ROLE"/>
                    <ComboBoxItem Content="DROP ANY ROLE"/>
                    <ComboBoxItem Content="GRANT ANY ROLE"/>
                    <ComboBoxItem Content="CREATE SESSION"/>
                    <ComboBoxItem Content="CREATE ANY TABLE"/>
                    <ComboBoxItem Content="ALTER ANY TABLE"/>
                    <ComboBoxItem Content="DROP ANY TABLE"/>
                    <ComboBoxItem Content="SELECT ANY TABLE"/>
                    <ComboBoxItem Content="INSERT ANY TABLE"/>
                    <ComboBoxItem Content="CREATE USER"/>
                    <ComboBoxItem Content="ALTER USER"/>
                    <ComboBoxItem Content="DROP USER"/>
                </ComboBox>
            </StackPanel>

            <StackPanel Grid.Column="1" Margin="5">
                <Label Content="Object Privileges"/>
                <ComboBox x:Name="cbObjectPrivileges" 
                              Style="{StaticResource cbLuaChon}" 
                              Width="180" SelectionChanged="cbObjectPrivileges_SelectionChanged">
                    <ComboBoxItem Content="SELECT"/>
                    <ComboBoxItem Content="INSERT"/>
                    <ComboBoxItem Content="DELETE"/>
                    <ComboBoxItem Content="UPDATE"/>
                </ComboBox>
            </StackPanel>

            <StackPanel Grid.Column="2" Margin="5">
                <Label Content="Specific Object"/>
                <TextBox x:Name="txtSpecificObject" 
                             Style="{StaticResource tbxNoiDung}" 
                             Width="180" 
                             ToolTip="Nhập tên bảng hoặc cột: table_name hoặc table_name.column_name"/>
            </StackPanel>
            <StackPanel Grid.Column="3" Margin="5">
                <Label Content="Column (Optional)"/>
                <TextBox x:Name="txtColumnName" 
             Style="{StaticResource tbxNoiDung}" 
             Width="178" 
             ToolTip="If granting column-level privileges, enter the column name"/>
            </StackPanel>
        </Grid>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,10" Width="488">
            <Button x:Name="btnGrantPrivilege" 
                        Content="GRANT/REVOKE" 
                        Style="{StaticResource btnThem}" 
                        Click="btnGrantPrivilege_Click"
                        Margin="5" Width="145"/>
            <CheckBox x:Name="chkAllowReGrantPrivilege" 
                          Content="Grantable" 
                          VerticalAlignment="Center" 
                          Margin="10,0"/>
        </StackPanel>

        <TabControl Grid.Row="3" Margin="10">
            <TabItem x:Name="tabPrivilegeManagement" Header="Privilege Management" Style="{StaticResource tab}" Width="130">
                <DataGrid x:Name="dtgPrivilegeManagement" 
                              AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="User/Role" Binding="{Binding USERNAME}"/>
                        <DataGridTextColumn Header="Privilege Type" Binding="{Binding PRIVILEGETYPE}"/>
                        <DataGridTextColumn Header="Privilege" Binding="{Binding SPECIFICPRIVILEGE}"/>
                        <DataGridTextColumn Header="Object" Binding="{Binding OBJECT}"/>
                        <DataGridTextColumn Header="Column" Binding="{Binding COLUMN_NAME}"/>
                        <DataGridTextColumn Header="Grantable" Binding="{Binding GRANTABLE}"/>
                        <DataGridTemplateColumn Header="Action">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Thu Hồi" 
                                                Style="{StaticResource btnXoa}" 
                                                Click="btnRevokePrivilege_Click"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>

            <TabItem x:Name="tabRoleManagement" Header="Personal Privileges" Width="130" Style="{StaticResource tab}">
                <DataGrid x:Name="dtgRoleManagement" 
                              AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="User/Role" Binding="{Binding USERNAME}"/>
                        <DataGridTextColumn Header="Privilege Type" Binding="{Binding PRIVILEGETYPE}"/>
                        <DataGridTextColumn Header="Privilege" Binding="{Binding SPECIFICPRIVILEGE}"/>
                        <DataGridTextColumn Header="Object" Binding="{Binding OBJECT}"/>
                        <DataGridTextColumn Header="Column" Binding="{Binding COLUMN_NAME}"/>
                        <DataGridTextColumn Header="Grantable" Binding="{Binding GRANTABLE}"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
